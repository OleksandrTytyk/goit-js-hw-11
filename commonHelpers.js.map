{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// Описаний у документації\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '41901135-804299004675a38bc43612a92';\n\n\nconst refs = {\n  form: document.querySelector('.js-form'),\n  input: document.querySelector('.js-form-input'),\n  btn: document.querySelector('.js-form-btn'),\n  card: document.querySelector('.js-card-container'),\n  loader: document.querySelector('.js-loader'),\n};\n\nconst gallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nclearGallery();\n\n\n\nrefs.form.addEventListener('submit', handleImageSearchSubmit);\n\nfunction handleImageSearchSubmit(event) {\n  event.preventDefault();\n\n  const searchQuery = refs.input.value.trim();\n\n  // refs.loader.classList.add('loader')\n\n  if (searchQuery === '') {\n    iziToast.warning({\n      message: 'Please enter a search query', // Сообщение на английском\n      position: 'topRight',\n    });\n    return;\n  }\n\n\n  \n  const url = `${BASE_URL}?key=${API_KEY}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n  fetch(url)\n    .then(response => response.json())\n    .then(data => {\n\n      if (!data.hits.length) {\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n        });\n      }\n\n\n      refs.card.innerHTML = ('beforeend', createMarkup(data.hits));\n      gallery.refresh();\n      // return data.hits;\n    })\n    .finally(() => refs.form.reset());\n  \n  refs.loader.classList.remove('loader')\n\n}\n\n// function fetchImages(url) {\n//   fetch(url)\n//     .then(response => {\n//       if (!response.ok) {\n//         throw new Error(`Network response was not ok: ${response.status}`);\n//       }\n//       return response.json();\n//     })\n//     .then(data => {\n//       if (data.hits.length !== 0) {\n//         refs.card.innerHTML = createMarkup(data.hits);\n//         gallery.destroy();\n//         gallery = new SimpleLightbox('.gallery a', {});\n//       } else {\n//         iziToast.error({\n//           message:\n//             'Sorry, there are no images matching your search query. Please try again!',\n//           position: 'topRight',\n//         });\n//       }\n//     })\n//     .catch(error => {\n//       console.error('Fetch error:', error);\n//       iziToast.error({\n//         message: 'An error occurred while fetching data. Please try again.',\n//         position: 'topRight',\n//       });\n//     })\n//     .finally(() => refs.form.reset());\n// }\n\nfunction createMarkup(imgCard) {\n  return imgCard\n    .map(img => {\n      const {\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      } = img;\n\n      return `\n  <li class=\"card-item\">\n    <div class=\"card-img js-card-img gallery\">\n      <a href=\"${largeImageURL}\" class=\"big-img js-big-img\">\n        <img\n          src=\"${webformatURL}\"\n          alt=\"${tags}\"\n          class=\"small-img js-small-img\"\n        />\n      </a>\n    </div>\n    <div class=\"stats-container js-stats-container\">\n      <p class=\"stats\">Likes: ${likes}</p>\n      <p class=\"stats\">Views: ${views}</p>\n      <p class=\"stats\">Comments: ${comments}</p>\n      <p class=\"stats\">Downloads: ${downloads}</p>\n    </div>\n  </li>\n`;\n    })\n    .join('');\n}\n\nfunction clearGallery() {\n  refs.card.innerHTML = '';\n}\n"],"names":["BASE_URL","API_KEY","refs","gallery","SimpleLightbox","clearGallery","handleImageSearchSubmit","event","searchQuery","iziToast","url","response","data","createMarkup","imgCard","img","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"6vBAMA,MAAMA,EAAW,2BACXC,EAAU,qCAGVC,EAAO,CACX,KAAM,SAAS,cAAc,UAAU,EACvC,MAAO,SAAS,cAAc,gBAAgB,EAC9C,IAAK,SAAS,cAAc,cAAc,EAC1C,KAAM,SAAS,cAAc,oBAAoB,EACjD,OAAQ,SAAS,cAAc,YAAY,CAC7C,EAEMC,EAAU,IAAIC,EAAe,aAAc,CAC/C,aAAc,MACd,aAAc,GAChB,CAAC,EAEDC,IAIAH,EAAK,KAAK,iBAAiB,SAAUI,CAAuB,EAE5D,SAASA,EAAwBC,EAAO,CACtCA,EAAM,eAAc,EAEpB,MAAMC,EAAcN,EAAK,MAAM,MAAM,KAAI,EAIzC,GAAIM,IAAgB,GAAI,CACtBC,EAAS,QAAQ,CACf,QAAS,8BACT,SAAU,UAChB,CAAK,EACD,MACD,CAID,MAAMC,EAAM,GAAGV,CAAQ,QAAQC,CAAO,MAAMO,CAAW,2DAEvD,MAAME,CAAG,EACN,KAAKC,GAAYA,EAAS,MAAM,EAChC,KAAKC,GAAQ,CAEPA,EAAK,KAAK,QACbH,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UACpB,CAAS,EAIHP,EAAK,KAAK,UAA0BW,EAAaD,EAAK,IAAI,EAC1DT,EAAQ,QAAO,CAErB,CAAK,EACA,QAAQ,IAAMD,EAAK,KAAK,MAAO,CAAA,EAElCA,EAAK,OAAO,UAAU,OAAO,QAAQ,CAEvC,CAiCA,SAASW,EAAaC,EAAS,CAC7B,OAAOA,EACJ,IAAIC,GAAO,CACV,KAAM,CACJ,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EAEJ,MAAO;AAAA;AAAA;AAAA,iBAGIE,CAAa;AAAA;AAAA,iBAEbD,CAAY;AAAA,iBACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAMWC,CAAK;AAAA,gCACLC,CAAK;AAAA,mCACFC,CAAQ;AAAA,oCACPC,CAAS;AAAA;AAAA;AAAA,CAI7C,CAAK,EACA,KAAK,EAAE,CACZ,CAEA,SAASjB,GAAe,CACtBH,EAAK,KAAK,UAAY,EACxB"}